# HTML

## HTML5 的新特性

1. 新增的有：
   1. 绘画用的 canvas
   2. 播放视频和音频的 video 和 audio
   3. localStorage 用于本地存储，浏览器关闭后数据不丢失
   4. sessionStorage 也能存储，但浏览器关闭后自动删除
   5. 新的技术 web worker
2. 移除的有一些纯用于表现的元素：big、center(文本居中)、u(下划线)

## 常见浏览器及其内核

1. IE：Trident 内核
2. Chrome：Chromium 内核，发音克若米恩
3. FireFox：Gecko 内核
4. Safari：Webkit 内核

## 浏览器输入网址到显示网页的过程

1. 查询 DNS，获取域名对应的 IP 地址。首先查浏览器 DNS 缓存，然后查系统 DNS 缓存和 HOST 文件，最后去本地域名服务器进行查找，服务器会从根域名服务器开始逐级查找；
2. 获取 IP 地址后，进行 TCP/IP 三次握手；
3. 成功建立连接后，浏览器发送请求
4. 服务器处理请求，随后返回响应报文
5. 浏览器解析渲染页面

## 浏览器渲染页面的过程

1. 首先解析接收到的 HTML 文件，转化成 DOM 树
2. 然后解析 CSS，生成 CSSOM 规则树
3. 根据 DOM 树和 CSSOM 树合并成渲染树，渲染树包含了要显示的节点以及样式信息
4. 根据渲染树来进行布局，这一阶段浏览器就是要搞清楚各个节点在页面中的位置和大小，也叫做回流、重排
5. 最后就是绘制阶段，遍历渲染树将各个节点显示在屏幕上

## 回流/重排 和 重绘

1. 回流/重排：当渲染树的某些元素因为尺寸、位置等属性发生改变，影响到布局，导致要重新去构建那一部分受影响的渲染树
2. 重绘：当渲染树的某些元素更新了一些不影响布局的属性，比如说改了颜色，浏览器就会跳过布局阶段，直接重新绘制元素
3. 回流一定会发生重绘，重绘不一定会回流，回流所需成本要比重绘高
4. 回流的产生：
   1. 元素大小改变：内外边距、边框、宽高等等
   2. 内容变化：用户在 input 输入框里输入文字
   3. 浏览器窗口大小发生改变
   4. 添加或删除可见的 DOM 元素
   5. 设置 style 属性
   6. 调用 getComputedStyle() 也会引起回流，为了获取到最新准确的数据
5. 减少回流的方法：
   1. 不要一条一条地去修改 style 属性，可以先预定义好 class 样式，然后修改 DOM 的 class
   2. 避免在循环中读取 DOM 的某些会引起回流的属性，例如 offsetWidth、offsetHeight，应该在循环之前先保存起来
   3. 不要用 table 布局，因为 table 中某个元素一旦触发回流会造成整个 table 的重新布局

## 搜索引擎优化 SEO

1. 用好 HTML 的语义化标签
2. 重要内容 HTML 代码放前面；搜索引擎抓取 HTML 是从上到下，有的搜索引擎抓取长度有限制，放前面保证重要内容被抓取
3. 重要内容不用 js 来输出，爬虫不会执行 js 去获取内容
4. 少用 iframe，搜索引擎不抓取 iframe 的内容
5. 非装饰性的图片加 alt

## 前端性能优化

```
 前端性能优化主要是为了提高页面的加载速度，优化用户的访问体验。我认为可以从这些方面来进行优化。

 第一个方面是页面的内容方面

 （1）通过文件合并、css 雪碧图、使用 base64 等方式来减少 HTTP 请求数，避免过多的请求造成等待的情况。

 （2）通过 DNS 缓存等机制来减少 DNS 的查询次数。

 （3）通过设置缓存策略，对常用不变的资源进行缓存。

 （4）使用延迟加载的方式，来减少页面首屏加载时需要请求的资源。延迟加载的资源当用户需要访问时，再去请求加载。

 （5）通过用户行为，对某些资源使用预加载的方式，来提高用户需要访问资源时的响应速度。

 第二个方面是服务器方面

 （1）使用 CDN 服务，来提高用户对于资源请求时的响应速度。

 （2）服务器端启用 Gzip、Deflate 等方式对于传输的资源进行压缩，减小文件的体积。

 （3）尽可能减小 cookie 的大小，并且通过将静态资源分配到其他域名下，来避免对静态资源请求时携带不必要的 cookie

 第三个方面是 CSS 和 JavaScript 方面

 （1）把样式表放在页面的 head 标签中，减少页面的首次渲染的时间。

 （2）避免使用 @import 标签。

 （3）尽量把 js 脚本放在页面底部或者使用 defer 或 async 属性，避免脚本的加载和执行阻塞页面的渲染。

 （4）通过对 JavaScript 和 CSS 的文件进行压缩，来减小文件的体积。
```

## 二维码原理

1. 用户进入登录网页后，服务器生成一个 uid 来标识一个用户。对应的二维码对应了一个对应 uid 的链接，任何能够识别二维码的应用都可以获得这个链接，但是它们没有办法和对应登录的服务器响应；
2. 当微信客户端打开这个链接时，对应的登录服务器就获得了用户的相关信息。这个时候登录网页根据先前的长连接获取到服务器传过来的用户信息进行显示；
3. 当客户端点击确认授权登陆后，服务器生成一个权限令牌给网页
