# HTML

## HTML5 的新特性

1. 新增的有：
   1. 绘画用的 canvas
   2. 播放视频和音频的 video 和 audio
   3. localStorage 用于本地存储，浏览器关闭后数据不丢失
   4. sessionStorage 也能存储，但浏览器关闭后自动删除
   5. 新的技术 web worker
2. 移除的有一些纯用于表现的元素：big、center(文本居中)、u(下划线)

## 常见浏览器及其内核

1. IE：Trident 内核
2. Chrome：Chromium 内核，发音克若米恩
3. FireFox：Gecko 内核
4. Safari：Webkit 内核

## 浏览器输入网址到显示网页的过程

1. 查询 DNS，获取域名对应的 IP 地址。首先查浏览器 DNS 缓存，然后查系统 DNS 缓存和 HOST 文件，最后去本地域名服务器进行查找，服务器会从根域名服务器开始逐级查找；
2. 获取 IP 地址后，进行 TCP/IP 三次握手；
3. 成功建立连接后，浏览器发送请求
4. 服务器处理请求，随后返回响应报文
5. 浏览器解析渲染页面

## 浏览器渲染页面的过程

1. 首先解析接收到的 HTML 文件，转化成 DOM 树
2. 然后解析 CSS，生成 CSSOM 规则树
3. 根据 DOM 树和 CSSOM 树合并成渲染树，渲染树包含了要显示的节点以及样式信息
4. 根据渲染树来进行布局，这一阶段浏览器就是要搞清楚各个节点在页面中的位置和大小，也叫做回流、重排
5. 最后就是绘制阶段，遍历渲染树将各个节点显示在屏幕上

## 回流/重排 和 重绘

1. 回流/重排：当渲染树的某些元素因为尺寸、位置等属性发生改变，影响到布局，导致要重新去构建那一部分受影响的渲染树
2. 重绘：当渲染树的某些元素更新了一些不影响布局的属性，比如说改了颜色，浏览器就会跳过布局阶段，直接重新绘制元素
3. 回流的产生：
   1. 元素大小改变：内外边距、边框、宽高等等
   2. 内容变化：用户在 input 输入框里输入文字
   3. 浏览器窗口大小发生改变
   4. 添加或删除可见的 DOM 元素
   5. 设置 style 属性
   6. 调用 getComputedStyle() 也会引起回流，为了获取到最新准确的数据

## dom.getBoundingClientRect()

可获取 dom 元素的大小以及相对于视图的位置，例如获取元素离视图最左侧的距离